<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atelier Paneli - Kadraj l'Atelier</title>
   
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
   
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
        import { getFirestore, doc, getDoc, collection, addDoc, serverTimestamp, getDocs, query, where, deleteDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
        import { getStorage, ref, uploadBytesResumable, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCqrcT7QY6tsYJidztDDu2BZhU7hLZF-ZE",
            authDomain: "kadrajatelier-7e02a.firebaseapp.com",
            projectId: "kadrajatelier-7e02a",
            storageBucket: "kadrajatelier-7e02a.firebasestorage.app",
            messagingSenderId: "4259035875263",
            appId: "1:4259035875263:web:d1002c3816e86b4be52a0a"
        };
       
        const app = initializeApp(firebaseConfig);

        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);
       
        window.firebaseAuth = auth;
        window.firebaseFirestore = db;
        window.firebaseStorage = storage;
        window.signOut = signOut;
        window.onAuthStateChanged = onAuthStateChanged;
        window.doc = doc;
        window.getDoc = getDoc;
        window.collection = collection;
        window.addDoc = addDoc;
        window.serverTimestamp = serverTimestamp;
        window.ref = ref;
        window.uploadBytesResumable = uploadBytesResumable;
        window.getDownloadURL = getDownloadURL;
        window.getDocs = getDocs;
        window.query = query;
        window.where = where;
        window.deleteDoc = deleteDoc;
        window.updateDoc = updateDoc;
    </script>
    <style>
        .progress-bar {
            transition: width 0.3s ease-in-out;
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50 font-['Helvetica'] text-gray-800">
    <div id="root"></div>
    <script type="text/babel">
        // --- ICONS ---
        const UserIcon = (props) => <svg xmlns="http://www.w3.org/2000/svg" width={props.size} height={props.size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={props.className}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>;
        const LayoutDashboardIcon = (props) => <svg xmlns="http://www.w3.org/2000/svg" width={props.size} height={props.size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={props.className}><rect width="7" height="9" x="3" y="3" rx="1"/><rect width="7" height="5" x="14" y="3" rx="1"/><rect width="7" height="9" x="14" y="12" rx="1"/><rect width="7" height="5" x="3" y="16" rx="1"/></svg>;
        const BoxIcon = (props) => <svg xmlns="http://www.w3.org/2000/svg" width={props.size} height={props.size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={props.className}><path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/><path d="m3.3 7 8.7 5 8.7-5"/><path d="M12 22V12"/></svg>;
        const DollarSignIcon = (props) => <svg xmlns="http://www.w3.org/2000/svg" width={props.size} height={props.size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={props.className}><line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>;
        const LogOutIcon = (props) => <svg xmlns="http://www.w3.org/2000/svg" width={props.size} height={props.size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={props.className}><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="17 17 22 12 17 7"/><line x1="22" x2="10" y1="12" y2="12"/></svg>;
        const SearchIcon = (props) => <svg xmlns="http://www.w3.org/2000/svg" width={props.size} height={props.size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={props.className}><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>;
        const EyeIcon = (props) => <svg xmlns="http://www.w3.org/2000/svg" width={props.size} height={props.size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={props.className}><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>;
        const HeartIcon = (props) => <svg xmlns="http://www.w3.org/2000/svg" width={props.size} height={props.size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={props.className}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>;
        const PackageIcon = (props) => <svg xmlns="http://www.w3.org/2000/svg" width={props.size} height={props.size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={props.className}><path d="m7.5 4.27 9 5.16"/><path d="M2.5 8.67 12 14l9.5-5.33"/><path d="M12 22V14"/><path d="M2.5 17.33 12 22l9.5-4.67"/><path d="M2.5 12l9.5 5.5 9.5-5.5"/></svg>;

        // --- TRANSLATIONS (No changes) ---
        const translations = {
            'Türkçe': {
                discover: 'KEŞFET',
                newIn: 'Yeni Gelenler',
                newInDesc: 'Her hafta gelen en yeni parçalarımızı keşfedin.',
                shopNewIn: 'YENİ GELENLERİ KEŞFET',
                decor: 'Dekor',
                lighting: 'Aydınlatma',
                rugs: 'Halılar',
                armchairs: 'Koltuklar',
                tables: 'Masalar',
                storage: 'Depolama',
                allCategories: 'TÜM KATEGORİLER',
                designers: 'TASARIMCILAR',
                seating: 'OTURMA GRUPLARI',
                masters: 'USTALAR',
                shopByRoom: 'ODAYA GÖRE ALIŞVERİŞ',
                ourGalleries: 'GALERİLERİMİZ',
                home: 'Anasayfa',
                collectionHighlight: 'İlham Veren Markalar',
                perfectLiving: 'MÜKEMMEL YAŞAM',
                iconicTables: 'İkonik Masalar',
                collectorPanel: 'Koleksiyoner Paneli',
                atelierPanel: 'Atelier Paneli',
                adminPanel: 'Yönetici Paneli',
                login: 'Giriş Yap',
                logout: 'Çıkış Yap',
                newAddress: 'Yeni Adres',
                contact: 'İletişim',
                faq: 'Sıkça Sorulan Sorular',
                turkce: 'Türkçe',
                english: 'English',
                deutsch: 'Deutsch',
                tagline1: 'Tasarımın yeni adresi.',
                tagline2: 'Yaşam alanlarınıza değer katın. Özenle seçilmiş mobilya, aydınlatma ve dekorasyon ürünleriyle tanışın.',
                exploreLogin: 'Hemen Keşfet / Giriş Yap',
                furniture: 'Mobilya',
                furnitureDesc: 'Evinizin kalbini oluşturan özel tasarım mobilyalar.',
                genelHata: 'Bir hata oluştu. Lütfen tekrar deneyin.',
                lightingDesc: 'Mekanlarınıza ışık ve estetik katan tasarımlar.',
                decorationDesc: 'Detaylarla fark yaratan benzersiz dekoratif objeler.',
                collectorLogin: 'Koleksiyoner Girişi',
                email: 'E-posta',
                password: 'Şifre',
                invalidCredentials: 'Hatalı e-posta veya şifre. Lütfen tekrar deneyin.',
                sampleAccounts: 'Örnek Hesaplar:',
                collector: 'Koleksiyoner',
                atelier: 'Atelier',
                admin: 'Yönetici',
                wantToBeDesigner: 'Tasarımcı Ortağımız olmak ister misiniz?',
                atelierPartnershipApplication: 'Atelier Ortaklık Başvurusu',
                applicationReceived: 'Başvurunuz başarıyla alındı!',
                contactSoon: 'En kısa sürede sizinle iletişime geçeceğiz.',
                backToLogin: 'Giriş Sayfasına Dön',
                atelierName: 'Atelier Adı',
                fullName: 'Ad Soyad',
                confirmPassword: 'Şifre Tekrar',
                portfolioLink: 'Portfolyo Linki (Opsiyonel)',
                safetyWarning: 'Sicherheitshinweis: Diese Seite ist nur für Entwicklungs- und Testzwecke gedacht. Verwenden Sie keine echten Passwörter.',
                shortDescription: 'Kurze Beschreibung (Optional)',
                passwordsMismatch: 'Şifreler uyuşmuyor. Lütfen kontrol edin.',
                submitApplication: 'Başvuruyu Gönder',
                alreadyHaveAccount: 'Zaten hesabın var mı?',
                overview: 'Genel Bakış',
                productManagement: 'Ürün Yönetimi',
                ordersFinance: 'Siparişler & Finans',
                atelierReview: 'Atelier İncelemesi',
                last30Days: 'Son 30 gün içinde',
                mostPopularProduct: 'En Çok İlgi Çeken Ürün',
                views: 'görüntülenme',
                productViews: 'Ürün Görüntülenme Sayısı',
                totalViews: 'Toplam görüntülenme',
                addToFavoritesRate: 'Favorilere Eklenme Oranı',
                averageRate: 'Ortalama oran',
                addProductManage: 'Ürün Ekle/Yönet',
                addNewProduct: 'Yeni Ürün Ekle',
                productName: 'Ürün Adı',
                productDescription: 'Ürün Açıklaması',
                productStory: 'Ürünün Hikayesi',
                price: 'Fiyat',
                category: 'Kategori',
                categoryOptions: ['Mobilya', 'Aydınlatma', 'Dekorasyon', 'Sanat Eseri'],
                materialInfo: 'Materyal Bilgisi',
                dimensionsCm: 'Boyutlar (cm)',
                weightKg: 'Ağırlık (kg)',
                shippingInfo: 'Kargo Bilgileri',
                professionalPhotoGallery: 'Profesyonel Fotoğraf Galerisi',
                uploadPhotos: 'En az 3, en fazla 10 fotoğraf yükleyin.',
                saveProduct: 'Ürünü Kaydet',
                currentProducts: 'Mevcut Ürünler',
                active: 'Aktif',
                passive: 'Pasif',
                orders: 'Siparişler',
                lastOrders: 'Son Siparişler',
                completed: 'Tamamlandı',
                inTransit: 'Kargoda',
                cancelled: 'İptal Edildi',
                financialStatus: 'Finansal Durum',
                withdrawableBalance: 'Çekilebilir Bakiye',
                currentBalance: 'Güncel bakiye',
                totalEarnings: 'Toplam Kazanç',
                allTime: 'Tüm zamanlar',
                withdrawBalance: 'Bakiye Çek',
                myOrders: 'Siparişlerim',
                messageDesigner: 'Tasarımcıya Mesaj Gönder',
                favorites: 'Favorilerim',
                favoriteDesigns: 'Favori Tasarımlar',
                favoriteAteliers: 'Favori Atelierler',
                profileManagement: 'Profil Yönetimi',
                deliveryAddresses: 'Teslimat Adresleri',
                addressTitle: 'Adres Başlığı',
                addressLine1: 'Adres Satırı 1',
                addressLine2: 'Adres Satırı 2 (Opsiyonel)',
                city: 'İl',
                district: 'İlçe',
                zipCode: 'Posta Kodu',
                saveAddress: 'Adresi Kaydet',
                billingInformation: 'Fatura Bilgileri',
                nameSurnameCompanyName: 'Ad Soyad / Firma Adı',
                tcIdTaxNo: 'TC Kimlik No / Vergi No',
                saveBillingInfo: 'Fatura Bilgilerini Kaydet',
                galleryManagerPanel: 'Galeri Yöneticisi Paneli',
                userManager: 'Kullanıcı Yönetimi',
                designerApplications: 'Tasarımcı Başvuruları',
                pending: 'Beklemede',
                approved: 'Onaylandı',
                allUsers: 'Tüm Kullanıcılar',
                view: 'Görüntüle',
                approve: 'Onayla',
                allListedProducts: 'Tüm Listelenen Ürünler',
                featuredProducts: 'Öne Çıkarılan Ürünler',
                manageFeaturedProducts: 'Öne Çıkarılan Ürünleri Yönet',
                financeManagement: 'Finans Yönetimi',
                commissionRates: 'Komisyon Oranları',
                currentCommissionRate: 'Mevcut Komisyon Oranı:',
                setCommissionRate: 'Komisyon Oranını Ayarla',
                designerPayments: 'Tasarımcı Ödemeleri',
                managePayments: 'Ödemeleri Yönet',
                incomeExpenseReports: 'Gelir ve Gider Raporları',
                viewReports: 'Raporları Görüntüle',
                contentManagement: 'İçerik Yönetimi',
                homePageBanners: 'Ana Sayfa Bannerları',
                manageBanners: 'Bannerları Yönet',
                specialCollectionPages: 'Özel Koleksiyon Sayfaları',
                manageCollections: 'Koleksiyonları Yönet',
                blogPosts: 'Blog Yazıları',
                manageBlogPosts: 'Blog Yazılarını Yönet',
                orderId: 'Sipariş ID:',
                product: 'Ürün:',
                date: 'Tarih:',
                categoryManagement: 'Kategori Yönetimi',
                mainCategories: 'Ana Kategoriler',
                subCategories: 'Alt Kategoriler',
                addCategory: 'Kategori Ekle',
                editCategory: 'Kategoriyi Düzenle',
                deleteCategory: 'Kategoriyi Sil',
                categoryName: 'Kategori Adı',
                parentCategory: 'Üst Kategori',
                saveCategory: 'Kategoriyi Kaydet',
                sales: 'satış',
                unitsSold: 'adet satış',
                platformWide: 'Platform genelinde',
                artPiece: 'Sanat Eseri',
                lastViewedProduct: 'Son Görüntülenen Ürün',
                today: 'Bugün',
                modernScandinavianDesigns: 'Modern İskandinav Tasarımları',
                naturalWoodCollection: 'Doğal Ahşap Koleksiyonu',
            },
            'English': {
                discover: 'DISCOVER',
                newIn: 'NEW IN',
                newInDesc: 'Discover our latest pieces, arriving every week.',
                shopNewIn: 'SHOP NEW IN',
                decor: 'Décor',
                lighting: 'Lighting',
                rugs: 'Rugs',
                armchairs: 'Armchairs',
                tables: 'Tables',
                storage: 'Storage',
                allCategories: 'ALL CATEGORIES',
                designers: 'DESIGNERS',
                seating: 'SEATING',
                masters: 'MASTERS',
                shopByRoom: 'SHOP BY ROOM',
                ourGalleries: 'OUR GALLERIES',
                home: 'Homepage',
                collectorPanel: 'Collector Panel',
                atelierPanel: 'Atelier Panel',
                adminPanel: 'Admin Panel',
                login: 'Login',
                logout: 'Logout',
                newAddress: 'New Address',
                contact: 'Contact',
                faq: 'Frequently Asked Questions',
                turkce: 'Türkçe',
                english: 'English',
                deutsch: 'Deutsch',
                tagline1: 'The new address of design.',
                tagline2: 'Add value to your living spaces. Discover carefully selected furniture, lighting and home decor products.',
                exploreLogin: 'Explore Now / Login',
                furniture: 'Furniture',
                decoration: 'Decoration',
                furnitureDesc: 'Special design furniture that forms the heart of your home.',
                genelHata: 'An error occurred. Please try again.',
                lightingDesc: 'Designs that add light and aesthetics to your spaces.',
                decorationDesc: 'Unique decorative objects that make a difference with details.',
                collectorLogin: 'Collector Login',
                email: 'Email',
                password: 'Password',
                invalidCredentials: 'Invalid email or password. Please try again.',
                sampleAccounts: 'Sample Accounts:',
                collector: 'Collector',
                atelier: 'Atelier',
                admin: 'Admin',
                wantToBeDesigner: 'Want to be a Designer Partner?',
                atelierPartnershipApplication: 'Atelier Partnership Application',
                applicationReceived: 'Your application has been successfully received!',
                contactSoon: 'We will contact you as soon as possible.',
                backToLogin: 'Back to Login Page',
                atelierName: 'Atelier Name',
                fullName: 'Full Name',
                confirmPassword: 'Confirm Password',
                portfolioLink: 'Portfolio Link (Optional)',
                safetyWarning: 'Safety Warning: This page is for development and testing purposes only. Do not use real passwords.',
                shortDescription: 'Short Description (Optional)',
                passwordsMismatch: 'Passwords do not match. Please check.',
                submitApplication: 'Submit Application',
                alreadyHaveAccount: 'Already have an account?',
                overview: 'Overview',
                productManagement: 'Product Management',
                ordersFinance: 'Orders & Finance',
                atelierReview: 'Atelier Review',
                last30Days: 'Last 30 days',
                mostPopularProduct: 'Most Popular Product',
                views: 'views',
                productViews: 'Product View Count',
                totalViews: 'Total views',
                addToFavoritesRate: 'Add to Favorites Rate',
                averageRate: 'Average rate',
                addProductManage: 'Add/Manage Product',
                addNewProduct: 'Add New Product',
                productName: 'Product Name',
                productDescription: 'Product Description',
                productStory: 'Product Story',
                price: 'Price',
                category: 'Category',
                categoryOptions: ['Furniture', 'Lighting', 'Decoration', 'Art Piece'],
                materialInfo: 'Material Information',
                dimensionsCm: 'Dimensions (cm)',
                weightKg: 'Weight (kg)',
                shippingInfo: 'Shipping Information',
                professionalPhotoGallery: 'Professional Photo Gallery',
                uploadPhotos: 'Upload at least 3, maximum 10 photos.',
                saveProduct: 'Save Product',
                currentProducts: 'Current Products',
                active: 'Active',
                passive: 'Passive',
                orders: 'Orders',
                lastOrders: 'Last Orders',
                completed: 'Completed',
                inTransit: 'In Transit',
                cancelled: 'Cancelled',
                financialStatus: 'Financial Status',
                withdrawableBalance: 'Withdrawable Balance',
                currentBalance: 'Current balance',
                totalEarnings: 'Total Earnings',
                allTime: 'All time',
                withdrawBalance: 'Withdraw Balance',
                myOrders: 'My Orders',
                messageDesigner: 'Message Designer',
                favorites: 'Favorites',
                favoriteDesigns: 'Favorite Designs',
                favoriteAteliers: 'Favorite Ateliers',
                profileManagement: 'Profile Management',
                deliveryAddresses: 'Delivery Addresses',
                addressTitle: 'Address Title',
                addressLine1: 'Address Line 1',
                addressLine2: 'Address Line 2 (Optional)',
                city: 'City',
                district: 'District',
                zipCode: 'Zip Code',
                saveAddress: 'Save Address',
                billingInformation: 'Billing Information',
                nameSurnameCompanyName: 'Name Surname / Company Name',
                tcIdTaxNo: 'TR ID No / Tax No',
                saveBillingInfo: 'Save Billing Information',
                galleryManagerPanel: 'Gallery Manager Panel',
                userManager: 'User Management',
                designerApplications: 'Designer Applications',
                pending: 'Pending',
                approved: 'Approve',
                allUsers: 'All Users',
                view: 'View',
                approve: 'Approve',
                allListedProducts: 'All Listed Products',
                featuredProducts: 'Manage Featured Products',
                financeManagement: 'Finance Management',
                commissionRates: 'Commission Rates',
                currentCommissionRate: 'Current Commission Rate:',
                setCommissionRate: 'Set Commission Rate',
                designerPayments: 'Designer Payments',
                managePayments: 'Manage Payments',
                incomeExpenseReports: 'Income and Expense Reports',
                viewReports: 'View Reports',
                contentManagement: 'Content Management',
                homePageBanners: 'Home Page Banners',
                manageBanners: 'Manage Banners',
                specialCollectionPages: 'Special Collection Pages',
                manageCollections: 'Manage Collections',
                blogPosts: 'Blog Posts',
                manageBlogPosts: 'Manage Blog Posts',
                orderId: 'Order ID:',
                product: 'Product:',
                date: 'Date:',
                categoryManagement: 'Category Management',
                mainCategories: 'Main Categories',
                subCategories: 'Sub Categories',
                addCategory: 'Add Category',
                editCategory: 'Edit Category',
                deleteCategory: 'Delete Category',
                categoryName: 'Category Name',
                parentCategory: 'Parent Category',
                saveCategory: 'Save Category',
                sales: 'sales',
                unitsSold: 'units sold',
                platformWide: 'Platform wide',
                artPiece: 'Art Piece',
                lastViewedProduct: 'Last Viewed Product',
                today: 'Today',
                modernScandinavianDesigns: 'Modern Scandinavian Designs',
                naturalWoodCollection: 'Natural Wood Collection',
            },
            'Deutsch': {
                discover: 'ENTDECKEN',
                newIn: 'NEUHEITEN',
                newInDesc: 'Entdecken Sie unsere neuesten Stücke, die jede Woche eintreffen.',
                shopNewIn: 'NEUHEITEN KAUFEN',
                decor: 'Dekor',
                lighting: 'Beleuchtung',
                rugs: 'Teppiche',
                armchairs: 'Sessel',
                tables: 'Tische',
                storage: 'Lagerung',
                allCategories: 'ALLE KATEGORIEN',
                designers: 'DESIGNER',
                seating: 'SITZMÖBEL',
                masters: 'MEISTER',
                shopByRoom: 'SHOP NACH ZIMMER',
                ourGalleries: 'UNSERE GALERIEN',
                home: 'Startseite',
                collectorPanel: 'Sammler-Panel',
                atelierPanel: 'Atelier-Panel',
                adminPanel: 'Admin-Panel',
                login: 'Anmelden',
                logout: 'Abmelden',
                newAddress: 'Neue Adresse',
                contact: 'Kontakt',
                faq: 'Häufig gestellte Fragen',
                turkce: 'Türkçe',
                english: 'English',
                deutsch: 'Deutsch',
                tagline1: 'Die neue Adresse des Designs.',
                tagline2: 'Verleihen Sie Ihren Wohnräumen Wert. Entdecken Sie sorgfältig ausgewählte Möbel, Beleuchtung und Heimdekorationsprodukte.',
                exploreLogin: 'Jetzt entdecken / Anmelden',
                furniture: 'Möbel',
                decoration: 'Dekoration',
                furnitureDesc: 'Spezielle Designermöbel, die das Herzstück Ihres Zuhauses bilden.',
                genelHata: 'Ein Fehler ist aufgetreten. Bitte versuchen Sie es erneut.',
                lightingDesc: 'Designs, die Ihren Räumen Licht und Ästhetik verleihen.',
                decorationDesc: 'Einzigartige Dekorationsgegenstände, die mit Details den Unterschied machen.',
                collectorLogin: 'Sammler-Login',
                email: 'E-Mail',
                password: 'Passwort',
                invalidCredentials: 'Ungültige E-Mail oder Passwort. Bitte versuchen Sie es erneut.',
                sampleAccounts: 'Beispielkonten:',
                collector: 'Sammler',
                atelier: 'Atelier',
                admin: 'Admin',
                wantToBeDesigner: 'Möchten Sie Designpartner werden?',
                atelierPartnerschaftsantrag: 'Atelier-Partnerschaftsantrag',
                applicationReceived: 'Ihr Antrag wurde erfolgreich empfangen!',
                contactSoon: 'Wir werden uns so schnell wie möglich mit Ihnen in Verbindung setzen.',
                backToLogin: 'Zur Anmeldeseite zurückkehren',
                atelierName: 'Atelier-Name',
                fullName: 'Vollständiger Name',
                confirmPassword: 'Passwort bestätigen',
                portfolioLink: 'Portfolio-Link (Optional)',
                safetyWarning: 'Sicherheitshinweis: Diese Seite ist nur für Entwicklungs- und Testzwecke gedacht. Verwenden Sie keine echten Passwörter.',
                shortDescription: 'Kurze Beschreibung (Optional)',
                passwordsMismatch: 'Passwörter stimmen nicht überein. Bitte überprüfen Sie.',
                submitApplication: 'Antrag absenden',
                alreadyHaveAccount: 'Haben Sie bereits ein Konto?',
                overview: 'Übersicht',
                productManagement: 'Produktverwaltung',
                ordersFinance: 'Bestellungen & Finanzen',
                atelierReview: 'Atelier-Bewertung',
                last30Days: 'Letzte 30 Tage',
                mostPopularProduct: 'Beliebtestes Produkt',
                views: 'Ansichten',
                productViews: 'Produktansichtszahl',
                totalViews: 'Gesamtansichten',
                addToFavoritesRate: 'Zu Favoriten hinzufügen Rate',
                averageRate: 'Durchschnittliche Rate',
                addProductManage: 'Produkt hinzufügen/verwalten',
                addNewProduct: 'Neues Produkt hinzufügen',
                productName: 'Produktname',
                productDescription: 'Produktbeschreibung',
                productStory: 'Produktgeschichte',
                price: 'Preis',
                category: 'Kategorie',
                categoryOptions: ['Möbel', 'Beleuchtung', 'Dekoration', 'Kunstwerk'],
                materialInfo: 'Materialinformationen',
                dimensionsCm: 'Abmessungen (cm)',
                weightKg: 'Gewicht (kg)',
                shippingInfo: 'Versandinformationen',
                professionalPhotoGallery: 'Professionelle Fotogalerie',
                uploadPhotos: 'Laden Sie mindestens 3, maximal 10 Fotos hoch.',
                saveProduct: 'Produkt speichern',
                currentProducts: 'Aktuelle Produkte',
                active: 'Aktiv',
                passive: 'Pasiv',
                orders: 'Bestellungen',
                lastOrders: 'Letzte Bestellungen',
                completed: 'Abgeschlossen',
                inTransit: 'Unterwegs',
                cancelled: 'Storniert',
                financialStatus: 'Finanzstatus',
                withdrawableBalance: 'Auszahlbarer Saldo',
                currentBalance: 'Aktueller Saldo',
                totalEarnings: 'Gesamteinnahmen',
                allTime: 'Gesamtzeit',
                withdrawBalance: 'Saldo abheben',
                myOrders: 'Meine Bestellungen',
                messageDesigner: 'Designer benachrichtigen',
                favorites: 'Favoriten',
                favoriteDesigns: 'Lieblingsdesigns',
                favoriteAteliers: 'Lieblingsateliers',
                profileManagement: 'Profilverwaltung',
                deliveryAddresses: 'Lieferadressen',
                addressTitle: 'Adressbezeichnung',
                addressLine1: 'Adresszeile 1',
                addressLine2: 'Adresszeile 2 (Optional)',
                city: 'Stadt',
                district: 'Bezirk',
                zipCode: 'Postleitzahl',
                saveAddress: 'Adresse speichern',
                billingInformation: 'Rechnungsinformationen',
                nameSurnameCompanyName: 'Name Nachname / Firmenname',
                tcIdTaxNo: 'TR ID-Nr. / Steuernummer',
                saveBillingInfo: 'Rechnungsinformationen speichern',
                galleryManagerPanel: 'Galerie-Manager-Panel',
                userManager: 'Benutzerverwaltung',
                designerApplications: 'Designer-Anträge',
                pending: 'Ausstehend',
                approved: 'Genehmigt',
                allUsers: 'Alle Benutzer',
                view: 'Anzeigen',
                approve: 'Genehmigen',
                allListedProducts: 'Alle gelisteten Produkte',
                featuredProducts: 'Ausgewählte Produkte',
                manageFeaturedProducts: 'Ausgewählte Produkte verwalten',
                financeManagement: 'Finanzverwaltung',
                commissionRates: 'Provisionssätze',
                currentCommissionRate: 'Aktueller Provisionssatz:',
                setCommissionRate: 'Provisionssatz festlegen',
                designerPayments: 'Designer-Zahlungen',
                managePayments: 'Zahlungen verwalten',
                incomeExpenseReports: 'Einnahmen- und Ausgabenberichte',
                viewReports: 'Berichte anzeigen',
                contentManagement: 'Inhaltsverwaltung',
                homePageBanners: 'Startseiten-Banner',
                manageBanners: 'Banner verwalten',
                specialCollectionPages: 'Spezielle Kollektionsseiten',
                manageCollections: 'Kollektionen verwalten',
                blogPosts: 'Blogbeiträge',
                manageBlogPosts: 'Blogbeiträge verwalten',
                orderId: 'Bestell-ID:',
                product: 'Produkt:',
                date: 'Datum:',
                categoryManagement: 'Kategorienverwaltung',
                mainCategories: 'Hauptkategorien',
                subCategories: 'Unterkategorien',
                addCategory: 'Kategorie hinzufügen',
                editCategory: 'Kategorie bearbeiten',
                deleteCategory: 'Kategorie löschen',
                categoryName: 'Kategoriename',
                parentCategory: 'Übergeordnete Kategorie',
                saveCategory: 'Kategorie speichern',
                sales: 'Verkäufe',
                unitsSold: 'verkaufte Einheiten',
                platformWide: 'Plattformweit',
                artPiece: 'Kunstwerk',
                lastViewedProduct: 'Zuletzt angesehenes Produkt',
                today: 'Heute',
                modernScandinavianDesigns: 'Moderne skandinavische Designs',
                naturalWoodCollection: 'Naturholz-Kollektion',
            },
        };
        // --- HELPER COMPONENTS ---
        const Input = ({ label, type = 'text', placeholder, value, onChange, required = true }) => ( <div> <label className="block text-sm font-medium text-gray-700 mb-2">{label}</label> <input type={type} placeholder={placeholder} value={value} onChange={onChange} required={required} className="w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-gray-300 focus:border-gray-300 transition" /> </div> );
        const TextArea = ({ label, placeholder, value, onChange, required = true }) => ( <div> <label className="block text-sm font-medium text-gray-700 mb-2">{label}</label> <textarea placeholder={placeholder} value={value} onChange={onChange} required={required} rows="4" className="w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-gray-300 focus:border-gray-300 transition" ></textarea> </div> );
        const Select = ({ label, options, value, onChange, required = true }) => ( <div> <label className="block text-sm font-medium text-gray-700 mb-2">{label}</label> <select value={value} onChange={onChange} required={required} className="w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-gray-300 focus:border-gray-300 transition bg-white"> <option value="">Seçiniz...</option> {options.map(option => <option key={option} value={option}>{option}</option>)} </select> </div> );
        const MetricCard = ({ title, value, description, icon }) => ( <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100 flex items-start space-x-4"> <div className="bg-gray-100 p-3 rounded-lg">{icon}</div> <div> <p className="text-sm text-gray-500">{title}</p> <p className="text-2xl font-bold text-gray-800">{value}</p> <p className="text-xs text-gray-400">{description}</p> </div> </div> );
        const OrderItem = ({ orderId, productName, status, date, t }) => ( <li className="p-3 bg-gray-50 rounded-lg"> <div className="flex items-center justify-between"> <div> <p className="font-semibold text-gray-800">{productName}</p> <p className="text-xs text-gray-500">{t('orderId')} {orderId}</p> </div> <p className="font-bold text-gray-800">{date}</p> </div> <div className="mt-2 text-sm font-medium text-blue-600">{status}</div> </li> );

        // --- DASHBOARD COMPONENTS ---
        const SadeNavbar = ({ t, isLoggedIn, setIsLoggedIn }) => { 
            const handleLogout = async () => { 
                try { 
                    await window.signOut(window.firebaseAuth); 
                    setIsLoggedIn(false); 
                    window.location.href = 'index.html'; 
                } catch (error) { 
                    console.error("Çıkış yaparken hata oluştu:", error); 
                } 
            }; 
            return ( <nav className="bg-white py-4 border-b border-gray-100"> <div className="container mx-auto px-6 md:px-10 flex items-center justify-between"> <div className="flex items-center w-1/3 max-w-sm px-3 py-2 border border-gray-200 rounded-lg bg-gray-50"> <SearchIcon size={20} className="text-gray-500 mr-2" /> <input type="text" placeholder={t('searchProduct')} className="flex-grow outline-none text-sm text-gray-700 placeholder-gray-400 bg-transparent" /> </div> <div className="flex-grow flex justify-center"> <img src="ana logo yatay@2x.png" alt="Kadraj l'Atelier Logo" className="h-8 cursor-pointer" onClick={() => window.location.href = 'index.html'} /> </div> <div className="flex items-center space-x-6 w-1/3 justify-end"> {isLoggedIn && ( <button onClick={handleLogout} className="flex items-center space-x-2 text-red-600 hover:text-red-700 transition duration-300 ease-in-out px-3 py-2 rounded-lg hover:bg-red-50"> <LogOutIcon size={20} /> <span>{t('logout')}</span> </button> )} </div> </div> </nav> ); 
        };
       
        // --- Main SellerDashboard Component ---
        const SellerDashboard = ({ currentUser, t }) => {
            const [activeTab, setActiveTab] = React.useState('productManagement');
            const [products, setProducts] = React.useState([]);
            const [loadingProducts, setLoadingProducts] = React.useState(true);
            const [isEditing, setIsEditing] = React.useState(false);
            const [currentProduct, setCurrentProduct] = React.useState(null);

            // Form state
            const [productName, setProductName] = React.useState('');
            const [description, setDescription] = React.useState('');
            const [story, setStory] = React.useState('');
            const [price, setPrice] = React.useState('');
            const [category, setCategory] = React.useState('');
            const [material, setMaterial] = React.useState('');
            const [dimensions, setDimensions] = React.useState('');
            const [weight, setWeight] = React.useState('');
            const [shippingInfo, setShippingInfo] = React.useState('');
            const [files, setFiles] = React.useState([]);
            const [isUploading, setIsUploading] = React.useState(false);
            const [uploadProgress, setUploadProgress] = React.useState(0);
            const [feedback, setFeedback] = React.useState('');

            // Ürünleri Firestore'dan çekme işlevi
            const fetchProducts = async () => {
                if (!currentUser) return;
                setLoadingProducts(true);
                try {
                    const productsCollection = window.collection(window.firebaseFirestore, 'products');
                    const q = window.query(productsCollection, window.where('sellerId', '==', currentUser.uid));
                    const querySnapshot = await window.getDocs(q);
                    const productList = querySnapshot.docs.map(doc => ({
                        id: doc.id,
                        ...doc.data()
                    }));
                    setProducts(productList);
                } catch (error) {
                    console.error("Ürünler çekilirken hata oluştu:", error);
                } finally {
                    setLoadingProducts(false);
                }
            };

            React.useEffect(() => {
                if (activeTab === 'productManagement') {
                    fetchProducts();
                }
            }, [activeTab, currentUser]);

            const resetForm = () => {
                setProductName(''); setDescription(''); setStory(''); setPrice('');
                setCategory(''); setMaterial(''); setDimensions(''); setWeight('');
                setShippingInfo(''); setFiles([]);
                document.getElementById('file-input').value = null;
                setIsEditing(false);
                setCurrentProduct(null);
            };

            const handleSaveProduct = async (e) => {
                e.preventDefault();
                setIsUploading(true);
                setFeedback('Yükleme işlemi başlatılıyor...');
                setUploadProgress(0);

                if (!currentUser) {
                    setFeedback('Dosya yüklemek için oturum açmış bir satıcı olmalısınız.');
                    setIsUploading(false);
                    return;
                }

                const allFiles = Array.from(files);
                const imageFiles = allFiles.filter(file => file.type.startsWith('image/'));
                const videoFiles = allFiles.filter(file => file.type.startsWith('video/'));

                if (imageFiles.length === 0 && !isEditing) {
                    setFeedback('Hata: Lütfen en az bir ürün fotoğrafı yükleyin.');
                    setIsUploading(false);
                    return;
                }

                const uploadFile = (file) => {
                    return new Promise((resolve, reject) => {
                        const filePath = `users/${currentUser.uid}/${Date.now()}-${file.name}`;
                        const storageRef = window.ref(window.firebaseStorage, filePath);
                        const uploadTask = window.uploadBytesResumable(storageRef, file);
                        uploadTask.on('state_changed',
                            (snapshot) => {
                                const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                                setUploadProgress(progress);
                            },
                            (error) => reject(error),
                            async () => {
                                const downloadURL = await window.getDownloadURL(uploadTask.snapshot.ref);
                                resolve(downloadURL);
                            }
                        );
                    });
                };

                try {
                    setFeedback('Dosyalar yükleniyor...');
                    const imageUploadPromises = imageFiles.map(file => uploadFile(file));
                    const videoUploadPromises = videoFiles.map(file => uploadFile(file));
                   
                    const imageUrls = await Promise.all(imageUploadPromises);
                    const videoUrls = await Promise.all(videoUploadPromises);
                   
                    setFeedback('Veritabanına kaydediliyor...');
                    const productData = {
                        sellerId: currentUser.uid,
                        productName, description, story,
                        price: Number(price),
                        category, material, dimensions,
                        weight: Number(weight),
                        shippingInfo,
                        imageUrls: isEditing ? (imageUrls.length > 0 ? imageUrls : currentProduct.imageUrls) : imageUrls,
                        videoUrl: videoUrls.length > 0 ? videoUrls[0] : (isEditing ? currentProduct.videoUrl : null),
                        updatedAt: window.serverTimestamp()
                    };

                    if (isEditing) {
                        const productDocRef = window.doc(window.firebaseFirestore, 'products', currentProduct.id);
                        await window.updateDoc(productDocRef, productData);
                        setFeedback('Ürün başarıyla güncellendi!');
                    } else {
                        productData.createdAt = window.serverTimestamp();
                        await window.addDoc(window.collection(window.firebaseFirestore, 'products'), productData);
                        setFeedback('Ürün başarıyla kaydedildi!');
                    }

                    resetForm();
                    fetchProducts();

                } catch (error) {
                    console.error("Yükleme veya kaydetme hatası:", error);
                    setFeedback('Ürün kaydedilirken bir hata oluştu: ' + error.message);
                } finally {
                    setIsUploading(false);
                }
            };
           
            const handleEditProduct = (product) => {
                setIsEditing(true);
                setCurrentProduct(product);
                setProductName(product.productName);
                setDescription(product.description);
                setStory(product.story);
                setPrice(product.price);
                setCategory(product.category);
                setMaterial(product.material);
                setDimensions(product.dimensions);
                setWeight(product.weight);
                setShippingInfo(product.shippingInfo);
                setActiveTab('productManagement');
            };

            const handleDeleteProduct = async (productId) => {
                if (window.confirm("Bu ürünü silmek istediğinizden emin misiniz?")) {
                    try {
                        const productDocRef = window.doc(window.firebaseFirestore, 'products', productId);
                        await window.deleteDoc(productDocRef);
                       
                        setProducts(products.filter(p => p.id !== productId));
                        setFeedback('Ürün başarıyla silindi!');
                    } catch (error) {
                        console.error("Ürün silinirken hata oluştu:", error);
                        setFeedback('Ürün silinirken bir hata oluştu: ' + error.message);
                    }
                }
            };
            
            const renderProducts = () => {
              if (loadingProducts) {
                return <p>Ürünler yükleniyor...</p>;
              }
              if (products.length === 0) {
                return <p>Henüz yüklenmiş bir ürününüz bulunmamaktadır.</p>;
              }
              return (
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                  {products.map((product) => (
                    <div key={product.id} className="bg-white p-4 rounded-lg shadow-sm border border-gray-100 flex flex-col space-y-4">
                        <img src={product.imageUrls[0]} alt={product.productName} className="w-full h-40 object-cover rounded-md" />
                        <div className="flex flex-col flex-grow">
                            <p className="font-semibold text-lg text-gray-800">{product.productName}</p>
                            <p className="text-sm text-gray-500 mb-2">Kategori: {product.category}</p>
                            <div className="mt-auto flex items-center justify-between">
                                <span className="text-xl font-bold text-gray-900">{product.price} TL</span>
                                <div className="flex space-x-2">
                                    <button onClick={() => handleEditProduct(product)} className="text-sm px-3 py-1 rounded-full text-blue-600 bg-blue-50 hover:bg-blue-100 transition">{t('edit')}</button>
                                    <button onClick={() => handleDeleteProduct(product.id)} className="text-sm px-3 py-1 rounded-full text-red-600 bg-red-50 hover:bg-red-100 transition">{t('delete')}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                  ))}
                </div>
              );
            };

            const renderContent = () => {
                switch (activeTab) {
                    case 'overview': return (
                        <div className="space-y-6"> <h3 className="text-2xl font-semibold text-gray-800">{t('overview')}</h3> <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"> <MetricCard title={t('sales')} value="₺12,500" description={`5 ${t('unitsSold')}`} icon={<DollarSignIcon size={24} className="text-green-500" />} /> <MetricCard title={t('mostPopularProduct')} value="Minimalist Sehpa" description={`120 ${t('views')}`} icon={<PackageIcon size={24} className="text-blue-500" />} /> <MetricCard title={t('productViews')} value="1.540" description={t('platformWide')} icon={<EyeIcon size={24} className="text-indigo-500" />} /> </div> </div>
                    );
                    case 'productManagement': return (
                        <div className="space-y-6">
                            <h3 className="text-2xl font-semibold text-gray-800">{t('addProductManage')}</h3>
                            <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100">
                                <h4 className="text-xl font-medium text-gray-700 mb-4">{isEditing ? `Ürünü Düzenle: ${currentProduct.productName}` : t('addNewProduct')}</h4>
                                <form className="space-y-4" onSubmit={handleSaveProduct}>
                                    <Input label={t('productName')} placeholder="Örn: El Yapımı Seramik Vazo" value={productName} onChange={e => setProductName(e.target.value)} />
                                    <TextArea label={t('productDescription')} placeholder={t('productDescription')} value={description} onChange={e => setDescription(e.target.value)} />
                                    <TextArea label={t('productStory')} placeholder={t('productStory')} value={story} onChange={e => setStory(e.target.value)} required={false} />
                                    <Input label={t('price')} type="number" placeholder="Örn: 500" value={price} onChange={e => setPrice(e.target.value)} />
                                    <Select label={t('category')} options={[t('furniture'), t('lighting'), t('decoration'), t('artPiece')]} value={category} onChange={e => setCategory(e.target.value)} />
                                    <Input label={t('materialInfo')} placeholder="Örn: Seramik, Ahşap, Metal" value={material} onChange={e => setMaterial(e.target.value)} />
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <Input label={t('dimensionsCm')} placeholder="Örn: 20x15x10" value={dimensions} onChange={e => setDimensions(e.target.value)} />
                                        <Input label={t('weightKg')} type="number" placeholder="Örn: 2.5" value={weight} onChange={e => setWeight(e.target.value)} />
                                    </div>
                                    <TextArea label={t('shippingInfo')} placeholder={t('shippingInfo')} value={shippingInfo} onChange={e => setShippingInfo(e.target.value)} />
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">{t('professionalPhotoGallery')}</label>
                                        <input
                                            id="file-input"
                                            type="file"
                                            multiple
                                            accept="image/*,video/*"
                                            onChange={e => setFiles(e.target.files)}
                                            className="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-gray-100 file:text-gray-700 hover:file:bg-gray-200"
                                        />
                                        <p className="mt-1 text-sm text-gray-500">{t('uploadPhotos')} (Max. 1 video)</p>
                                    </div>
                                    {isEditing && (
                                        <p className="text-sm text-gray-500">Mevcut fotoğrafları korumak için yeni dosya seçmeyin.</p>
                                    )}
                                    {isUploading && (
                                        <div className="w-full bg-gray-200 rounded-full h-2.5">
                                            <div className="bg-blue-600 h-2.5 rounded-full progress-bar" style={{ width: `${uploadProgress}%` }}></div>
                                        </div>
                                    )}
                                    {feedback && <p className={`text-sm font-medium ${feedback.includes('Hata') ? 'text-red-600' : 'text-green-600'}`}>{feedback}</p>}
                                    <div className="flex space-x-4">
                                        <button type="submit" disabled={isUploading} className="w-full bg-gray-800 text-white py-3 px-4 rounded-lg hover:bg-gray-900 transition duration-300 ease-in-out shadow-md disabled:bg-gray-400">
                                            {isUploading ? 'Yükleniyor...' : (isEditing ? 'Güncelle' : t('saveProduct'))}
                                        </button>
                                        {isEditing && (
                                            <button type="button" onClick={resetForm} className="w-full bg-gray-300 text-gray-800 py-3 px-4 rounded-lg hover:bg-gray-400 transition duration-300 ease-in-out shadow-md">
                                                İptal
                                            </button>
                                        )}
                                    </div>
                                </form>
                            </div>
                            <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100 mt-6">
                                <h4 className="text-xl font-medium text-gray-700 mb-4">{t('currentProducts')}</h4>
                                {renderProducts()}
                            </div>
                        </div>
                    );
                    case 'ordersFinance': return (
                        <div className="space-y-6"> <h3 className="text-2xl font-semibold text-gray-800">{t('ordersFinance')}</h3> <div className="bg-white p-6 rounded-lg shadow-sm border border-gray-100"> <h4 className="text-xl font-medium text-gray-700 mb-4">{t('lastOrders')}</h4> <ul className="space-y-4"> <OrderItem orderId="KDA-001" productName="Minimalist Sehpa" status={t('completed')} date="28.07.2024" t={t}/> <OrderItem orderId="KDA-002" productName="El Yapımı Seramik Vazo" status={t('inTransit')} date="29.07.2024" t={t}/> </ul> </div> </div>
                    );
                    default: return null;
                }
            };
            return (
                <div className="flex flex-col md:flex-row gap-8">
                    <div className="md:w-1/4 bg-white p-6 rounded-xl shadow-sm h-fit border border-gray-100">
                        <h2 className="text-3xl font-bold text-gray-900 mb-6">{t('atelierPanel')}</h2>
                        <ul className="space-y-3">
                            <li><button onClick={() => setActiveTab('overview')} className={`flex items-center space-x-3 w-full text-left py-3 px-4 rounded-lg transition duration-200 ${activeTab === 'overview' ? 'bg-gray-100 text-gray-800 font-semibold' : 'text-gray-700 hover:bg-gray-50'}`}><LayoutDashboardIcon size={20} /><span>{t('overview')}</span></button></li>
                            <li><button onClick={() => setActiveTab('productManagement')} className={`flex items-center space-x-3 w-full text-left py-3 px-4 rounded-lg transition duration-200 ${activeTab === 'productManagement' ? 'bg-gray-100 text-gray-800 font-semibold' : 'text-gray-700 hover:bg-gray-50'}`}><BoxIcon size={20} /><span>{t('productManagement')}</span></button></li>
                            <li><button onClick={() => setActiveTab('ordersFinance')} className={`flex items-center space-x-3 w-full text-left py-3 px-4 rounded-lg transition duration-200 ${activeTab === 'ordersFinance' ? 'bg-gray-100 text-gray-800 font-semibold' : 'text-gray-700 hover:bg-gray-50'}`}><DollarSignIcon size={20} /><span>{t('ordersFinance')}</span></button></li>
                        </ul>
                    </div>
                    <div className="md:w-3/4 bg-white p-8 rounded-xl shadow-sm border border-gray-100">
                        {renderContent()}
                    </div>
                </div>
            );
        };
       
        // --- MAIN APP ---
        const App = () => {
            const [isLoggedIn, setIsLoggedIn] = React.useState(false);
            const [userType, setUserType] = React.useState(null);
            const [language, setLanguage] = React.useState('Türkçe');
            const [currentUser, setCurrentUser] = React.useState(null);
            const [isLoading, setIsLoading] = React.useState(true);

            React.useEffect(() => {
                const unsubscribe = window.onAuthStateChanged(window.firebaseAuth, async (user) => {
                    if (user) {
                        const userDocRef = window.doc(window.firebaseFirestore, 'users', user.uid);
                        const userDocSnap = await window.getDoc(userDocRef);
                        if (userDocSnap.exists()) {
                            const role = userDocSnap.data().role;
                            if (role === 'seller') {
                                setCurrentUser(user);
                                setUserType(role);
                                setIsLoggedIn(true);
                            } else {
                                window.location.href = 'index.html';
                            }
                        } else {
                            window.location.href = 'index.html';
                        }
                    } else {
                        window.location.href = 'index.html';
                    }
                    setIsLoading(false);
                });
                return () => unsubscribe();
            }, []);
            
            const t = (key) => (translations[language] && translations[language][key]) || key;
            
            if (isLoading) {
                return <div className="flex justify-center items-center h-screen"><p>Yükleniyor...</p></div>;
            }
            if (!isLoggedIn || userType !== 'seller') {
                return <div className="flex justify-center items-center h-screen"><p>Yetkiniz yok veya giriş yapılmamış. Yönlendiriliyorsunuz...</p></div>;
            }
            return (
                <div className="min-h-screen bg-gray-50 font-['Helvetica'] text-gray-800">
                    <SadeNavbar t={t} isLoggedIn={isLoggedIn} setIsLoggedIn={setIsLoggedIn} />
                    <main className="container mx-auto p-6 md:p-10">
                        <SellerDashboard currentUser={currentUser} t={t} />
                    </main>
                </div>
            );
        };
       
        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
